<!DOCTYPE html>
<html>
<head>
	<title>Ping Pong Game</title>
</head>
<body>
	<canvas id="canvas"></canvas>

	<script type="text/javascript" src="js/app.js"></script>
	<script type="text/javascript">
		const constants = {
			SpeedMultiplier: 10,

		}
		app.onInit = function(){
			this.canvas.height = document.documentElement.clientHeight;
			this.canvas.width = document.documentElement.clientWidth;
			p1 = this.getNode('p1');
			p2 = this.getNode('p2');
			document.addEventListener('keydown', event => {

				if (event.code === 'KeyS')      p1.direction =  1;
				if (event.code === 'KeyW')      p1.direction = -1;
				if (event.code === 'ArrowUp')   p2.direction = -1;
				if (event.code === 'ArrowDown') p2.direction =  1;
			});
			document.addEventListener('keyup', event => {
				if (event.code === 'KeyW')      p1.direction = 0;
				if (event.code === 'KeyS')      p1.direction = 0;
				if (event.code === 'ArrowUp')   p2.direction = 0;
				if (event.code === 'ArrowDown') p2.direction = 0;
			})

			this.nodes.push({
				id     : 'bg',
				x      : 0,
				y      : 0,
				width  : this.canvas.width,
				height : this.canvas.height,
				color  : 'black'
				})
			this.nodes.push({
				id     : 'p1',
				x      : 10,
				y      : 500, 
				width  : 30,
				height : 150,
				color  : 'white',
				direction: 0
			});
			this.nodes.push({
				id     : 'p2',
				x      : this.canvas.width - 10 - 30,
				y      : 500, 
				width  : 30,
				height : 150,
				color  : 'white',
				direction: 0
			})

		};

		app.onUpdate = function(time){
			//moving players
			p1 = this.getNode('p1');
			p1.y += p1.direction * constants.SpeedMultiplier;
			if (p1.y > this.canvas.height){
				p1.y = this.canvas.height;
			}
			else if (p1.y < 0) {
				p1.y = 0;
			}
			
			p2 = this.getNode('p2');
			p2.y += p2.direction * constants.SpeedMultiplier;
			if (p2.y > this.canvas.height){
				p2.y = this.canvas.height;
			}
			else if (p2.y < 0) {
				p2.y = 0;
			}
		};
	</script>
</body>
</html>